
; ******** Source: 64keymaps.asm
     1                          ; 64keymaps.asm
     2                          ;
     3                          ; Copyright (c) 2025 by David R. Van Wagner
     4                          ; MIT LICENSE
     5                          ; github.com/davervw
     6                          ;
     7                          ; keyboard map editor for Commodore 64
     8                          ; allows remapping of keyboard on standard hardware
     9                          ; such as for internationalization for different regions
    10                          ; or modernization (more closely match modern keyboard layouts)
    11                          ;
    12                          ; currently displays keyboard maps, port of BASIC code to 6502
    13                          ;
    14                          ; TODO: editor functionality
    15                          
    16                          * = $c000
    17                          
    18                          start:
    19  c000 4c06c0                 jmp init
    20  c003 4c4cc0                 jmp reserved
    21                          
    22                          init:
    23  c006 2050c0                 jsr copy_map_addrs
    24  c009 2083c0                 jsr copy_maps
    25  c00c 20b2c0                 jsr index_chars
    26  c00f 20dac1                 jsr compute_scan_xys
    27  c012 a993                   lda #147
    28  c014 20d2ff                 jsr $ffd2
    29  c017 a900                   lda #0
    30  c019 a201                   ldx #1
    31  c01b a001                   ldy #1
    32  c01d 20e8c0                 jsr display_map
    33  c020 a901                   lda #1
    34  c022 a201                   ldx #1
    35  c024 a007                   ldy #7
    36  c026 20e8c0                 jsr display_map
    37  c029 a902                   lda #2
    38  c02b a201                   ldx #1
    39  c02d a00d                   ldy #13
    40  c02f 20e8c0                 jsr display_map
    41  c032 a903                   lda #3
    42  c034 a201                   ldx #1
    43  c036 a013                   ldy #19
    44  c038 20e8c0                 jsr display_map
    45  c03b a2e9                   ldx #<xystrings
    46  c03d a0c8                   ldy #>xystrings
    47  c03f 208fc1                 jsr display_xystrs
    48  c042 a015                   ldy #21
    49  c044 84d6                   sty $d6
    50  c046 a90d                   lda #13
    51  c048 20d2ff                 jsr $ffd2
    52  c04b 60                     rts
    53                          
    54                          reserved:
    55  c04c 00                     brk
    56                          
    57                          getmap:
    58  c04d 6c8f02                 jmp ($028f)
    59                          
    60                          copy_map_addrs:
    61                              ; first retrieve addresses to four sets
    62  c050 78                     sei ; don't allow IRQ to process keyboard and interfere with us
    63                              
    64  c051 ad8d02                 lda $28d
    65  c054 48                     pha ; save existing keyboard shift state
    66                              
    67  c055 a000                   ldy #0
    68  c057 84ff                   sty $ff
    69  c059 8c8d02                 sty $28d ; keyboard shift state (0,1,2,4)
    70  c05c 204dc0             -   jsr getmap
    71  c05f a5f5                   lda $f5
    72  c061 a4ff                   ldy $ff
    73  c063 99d9c8                 sta rom_maps,y
    74  c066 a5f6                   lda $f6
    75  c068 99dac8                 sta rom_maps+1,y
    76  c06b e6ff                   inc $ff
    77  c06d e6ff                   inc $ff
    78  c06f ad8d02                 lda $28d
    79  c072 18                     clc
    80  c073 d001                   bne +
    81  c075 38                     sec
    82  c076 2e8d02             +   rol $28d
    83  c079 c904                   cmp #4
    84  c07b 90df                   bcc -
    85                          
    86  c07d 68                     pla
    87  c07e 8d8d02                 sta $28d ; restore shift map
    88                          
    89  c081 58                     cli ; restore keyboard
    90  c082 60                     rts
    91                          
    92                          copy_maps:
    93  c083 a200                   ldx #0
    94  c085 a9d9                   lda #<remaps
    95  c087 85fd                   sta $fd
    96  c089 a9c2                   lda #>remaps
    97  c08b 85fe                   sta $fe
    98  c08d bdd9c8             --  lda rom_maps,x
    99  c090 85fb                   sta $fb
   100  c092 bddac8                 lda rom_maps+1,x
   101  c095 85fc                   sta $fc
   102                          
   103  c097 a03f                   ldy #63
   104  c099 b1fb               -   lda ($fb),y
   105  c09b 91fd                   sta ($fd),y
   106  c09d 88                     dey
   107  c09e 10f9                   bpl -
   108                          
   109  c0a0 18                     clc
   110  c0a1 a5fd                   lda $fd
   111  c0a3 6940                   adc #64
   112  c0a5 85fd                   sta $fd
   113  c0a7 9002                   bcc +
   114  c0a9 e6fe                   inc $fe
   115                          +
   116  c0ab e8                     inx
   117  c0ac e8                     inx
   118  c0ad e008                   cpx #8
   119  c0af 90dc                   bcc --
   120  c0b1 60                     rts
   121                          
   122                          index_chars:
   123  c0b2 a200                   ldx #0
   124  c0b4 a9d9                   lda #<remaps
   125  c0b6 85fb                   sta $fb
   126  c0b8 a9c2                   lda #>remaps
   127  c0ba 85fc                   sta $fc
   128  c0bc a9d9                   lda #<char_to_scan
   129  c0be 85fd                   sta $fd
   130  c0c0 a9c3                   lda #>char_to_scan
   131  c0c2 85fe                   sta $fe
   132  c0c4 a03f               --  ldy #63
   133  c0c6 84ff                   sty $ff
   134  c0c8 b1fb               -   lda ($fb),y
   135  c0ca a8                     tay
   136  c0cb a5ff                   lda $ff
   137  c0cd 91fd                   sta ($fd),y
   138  c0cf c6ff                   dec $ff
   139  c0d1 a4ff                   ldy $ff
   140  c0d3 10f3                   bpl -
   141  c0d5 18                     clc
   142  c0d6 a5fb                   lda $fb
   143  c0d8 6940                   adc #64 ; advance source 64 scancodes
   144  c0da 85fb                   sta $fb
   145  c0dc 9002                   bcc +
   146  c0de e6fc                   inc $fc
   147  c0e0 e6fe               +   inc $fe ; advance dest 256 characters
   148  c0e2 e8                     inx
   149  c0e3 e004                   cpx #4 ; 4 sets?
   150  c0e5 90dd                   bcc --
   151  c0e7 60                     rts
   152                          
   153                          display_map: ; .a = map (0..3), .x/.y = screen coordinates
   154  c0e8 8ee8c8                 stx col_x
   155  c0eb 8ce7c8                 sty row_y
   156                          
   157  c0ee aa                     tax
   158  c0ef a9d9                   lda #<remaps
   159  c0f1 85fb                   sta $fb
   160  c0f3 a9c2                   lda #>remaps
   161  c0f5 85fc                   sta $fc
   162  c0f7 e000                   cpx #0
   163  c0f9 f00e                   beq ++
   164  c0fb 18                 -   clc
   165  c0fc a5fb                   lda $fb
   166  c0fe 6940                   adc #64
   167  c100 85fb                   sta $fb
   168  c102 9002                   bcc +
   169  c104 e6fc                   inc $fc
   170  c106 ca                 +   dex
   171  c107 d0f2                   bne -
   172                          ++
   173  c109 a900                   lda #0
   174  c10b 85ff                   sta $ff ; scancode
   175  c10d a8                     tay
   176  c10e b1fb               -   lda ($fb),y ; remap of requested shift state
   177  c110 c9ff                   cmp #$ff
   178  c112 f00f                   beq +
   179                          
   180  c114 8502                   sta $02 ; save character    
   181  c116 b959c2                 lda scancode_x, y
   182  c119 aa                     tax
   183  c11a b999c2                 lda scancode_y, y
   184  c11d a8                     tay
   185  c11e a502                   lda $02 ; restore character
   186                          
   187  c120 202cc1                 jsr display_char_at_xy
   188  c123 e6ff               +   inc $ff
   189  c125 a4ff                   ldy $ff
   190  c127 c040                   cpy #64
   191  c129 90e3                   bcc -
   192  c12b 60                     rts
   193                          
   194                          display_char_at_xy:
   195  c12c 48                     pha
   196  c12d a900                   lda #0
   197  c12f 85fe                   sta $fe
   198  c131 c004                   cpy #4 ; spacebar row?
   199  c133 d002                   bne +
   200  c135 a908                   lda #8 ; repeat count for spacebar position
   201  c137 85fe               +   sta $fe
   202                          
   203  c139 2071c1                 jsr locate_xy
   204                          
   205  c13c 68                     pla
   206  c13d c9a0                   cmp #160 ; shift space
   207  c13f f002                   beq +
   208  c141 c920                   cmp #32 ; space
   209  c143 d006               +   bne +
   210  c145 a201                   ldx #1
   211  c147 86c7                   stx $c7
   212  c149 d01e                   bne ++
   213  c14b c90d               +   cmp #13 ; return ^M
   214  c14d d008                   bne +
   215  c14f a201                   ldx #1
   216  c151 86c7                   stx $c7
   217  c153 a94d                   lda #'M'
   218  c155 d012                   bne ++
   219  c157 c98d               +   cmp #141 ; shift+return ^M
   220  c159 d008                   bne +
   221  c15b a201                   ldx #1
   222  c15d 86c7                   stx $c7
   223  c15f a96d                   lda #'m'
   224  c161 d006                   bne ++
   225  c163 a201               +   ldx #1
   226  c165 86d4                   stx $d4 ; quote mode just in case for control characters
   227  c167 86d8                   stx $d8 ; number of inserts just in case for control characters
   228                          ++  
   229  c169 20d2ff             -   jsr $ffd2
   230  c16c c6fe                   dec $fe
   231  c16e 10f9                   bpl - ; repeat for spacebar
   232  c170 60                     rts
   233                          
   234                          locate_xy:
   235  c171 98                     tya
   236  c172 18                     clc
   237  c173 6de7c8                 adc row_y
   238  c176 c900                   cmp #0
   239  c178 d004                   bne +
   240  c17a a913                   lda #19 ; home    
   241  c17c d006                   bne ++
   242  c17e e901               +   sbc #1
   243  c180 85d6                   sta $d6 ; physical line
   244  c182 a90d                   lda #13
   245  c184 20d2ff             ++  jsr $ffd2 ; effect the change
   246  c187 18                     clc
   247  c188 8a                     txa
   248  c189 6de8c8                 adc col_x
   249  c18c 85d3                   sta $d3 ; adjust column
   250  c18e 60                     rts
   251                          
   252                          display_xystrs: ; pointer to an xystr, terminated by empty string (0 length)
   253  c18f 86fb                   stx $fb
   254  c191 84fc                   sty $fc
   255  c193 a002               -   ldy #2
   256  c195 b1fb                   lda ($fb),y
   257  c197 f00a                   beq +
   258  c199 a6fb                   ldx $fb
   259  c19b a4fc                   ldy $fc
   260  c19d 20a4c1                 jsr display_xystr
   261  c1a0 4c93c1                 jmp -
   262  c1a3 60                 +   rts
   263                          
   264                          display_xystr: ; string (x/y registers ptr) is prefixed by screen coordinates, terminated by null
   265  c1a4 86fb                   stx $fb
   266  c1a6 84fc                   sty $fc
   267  c1a8 a000                   ldy #0
   268  c1aa 8ce8c8                 sty col_x
   269  c1ad 8ce7c8                 sty row_y
   270  c1b0 b1fb                   lda ($fb),y
   271  c1b2 aa                     tax
   272  c1b3 c8                     iny
   273  c1b4 b1fb                   lda ($fb),y
   274  c1b6 a8                     tay
   275  c1b7 2071c1                 jsr locate_xy
   276  c1ba 18                     clc
   277  c1bb a5fb                   lda $fb
   278  c1bd 6902                   adc #2
   279  c1bf 85fb                   sta $fb
   280  c1c1 9002                   bcc +
   281  c1c3 e6fc                   inc $fc
   282  c1c5 a000               +   ldy #0
   283  c1c7 b1fb               -   lda ($fb),y
   284  c1c9 e6fb                   inc $fb
   285  c1cb d002                   bne +
   286  c1cd e6fc                   inc $fc
   287  c1cf c900               +   cmp #0
   288  c1d1 f006                   beq +
   289  c1d3 20d2ff                 jsr $ffd2
   290  c1d6 4cc7c1                 jmp -
   291  c1d9 60                 +   rts
   292                          
   293                          compute_scan_xys:
   294  c1da a959                   lda #(5*18-1)
   295  c1dc 85ff                   sta $ff
   296  c1de a004                   ldy #4
   297  c1e0 8402                   sty $02
   298  c1e2 a211               --  ldx #17
   299  c1e4 a4ff               -   ldy $ff
   300  c1e6 b9ffc1                 lda scan_layout,y
   301  c1e9 300a                   bmi +
   302  c1eb a8                     tay
   303  c1ec 8a                     txa
   304  c1ed 9959c2                 sta scancode_x,y
   305  c1f0 a502                   lda $02
   306  c1f2 9999c2                 sta scancode_y,y
   307  c1f5 c6ff               +   dec $ff
   308  c1f7 ca                     dex
   309  c1f8 10ea                   bpl -
   310  c1fa c602                   dec $02
   311  c1fc 10e4                   bpl --
   312  c1fe 60                     rts
   313                          
   314                          ; this is the hardware scan code physical layout as a 5x18 array
   315                          ; keys are independent of internationalization, localization
   316                          ; because these are scancodes - the physical key representations
   317                          ; independent of the PETSCII codes they map to via KERNAL ROM
   318                          ; or remapping like we will do
   319                          ;
   320                          ; each key 0..63 should be shown exactly once, with 255 for whitespace (not a key)
   321                          ;
   322                          ; the purpose of this array is to show where physical keys are
   323                          ; It does not change.  !!! DO NOT CHANGE !!!
   324                          scan_layout: ; 5 rows, 18 columns = 90 bytes
   325  c1ff 39383b080b101318...    !byte 57,56,59,8,11,16,19,24,27,32,35,40,43,48,51,0,255,4
   326  c211 3aff3e090e111619...    !byte 58,255,62,9,14,17,22,25,30,33,38,41,46,49,54,255,255,5
   327  c223 3fff0a0d12151a1d...    !byte 63,255,10,13,18,21,26,29,34,37,42,45,50,53,255,1,255,6
   328  c235 3d340c17141f1c27...    !byte 61,52,12,23,20,31,28,39,36,47,44,55,255,15,7,2,255,3
   329  c247 ffffff3cffffffff...    !byte 255,255,255,60,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   330                          
   331                          ; coordinates are derived from scan_layout at runtime to avoid redundant maintainance
   332                          scancode_x:
   333  c259 0000000000000000...    !byte 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   334  c279 0000000000000000...    !byte 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   335                              
   336                          scancode_y:
   337  c299 0000000000000000...    !byte 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   338  c2b9 0000000000000000...    !byte 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   339                          
   340                          ; with a US ROM, this will display like the following
   341                          ; _1234567890+-\st E
   342                          ; d qwertyuiop@*^  F
   343                          ; c asdfghjkl:;= m G
   344                          ; bazxcvbnm,./ aq] H
   345                          
   346                          remaps: ; 4 keyboard sets of PETSCII characters indexed by scancode
   347  c2d9 0000000000000000...    !byte 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   348  c2f9 0000000000000000...    !byte 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   349                          
   350  c319 0000000000000000...    !byte 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   351  c339 0000000000000000...    !byte 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   352                          
   353  c359 0000000000000000...    !byte 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   354  c379 0000000000000000...    !byte 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   355                          
   356  c399 0000000000000000...    !byte 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   357  c3b9 0000000000000000...    !byte 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
   358                          
   359                          char_to_scan: ; 4 sets of scancodes indexed by PETSCII characters
   360  c3d9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   361  c3e9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   362  c3f9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   363  c409 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   364  c419 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   365  c429 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   366  c439 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   367  c449 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   368  c459 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   369  c469 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   370  c479 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   371  c489 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   372  c499 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   373  c4a9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   374  c4b9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   375  c4c9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   376  c4d9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   377  c4e9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   378  c4f9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   379  c509 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   380                          
   381  c519 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   382  c529 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   383  c539 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   384  c549 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   385  c559 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   386  c569 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   387  c579 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   388  c589 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   389  c599 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   390  c5a9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   391  c5b9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   392  c5c9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   393  c5d9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   394  c5e9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   395  c5f9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   396  c609 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   397  c619 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   398  c629 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   399  c639 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   400  c649 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   401                          
   402  c659 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   403  c669 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   404  c679 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   405  c689 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   406  c699 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   407  c6a9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   408  c6b9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   409  c6c9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   410  c6d9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   411  c6e9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   412  c6f9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   413  c709 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   414  c719 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   415  c729 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   416  c739 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   417  c749 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   418  c759 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   419  c769 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   420  c779 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   421  c789 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   422                          
   423  c799 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   424  c7a9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   425  c7b9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   426  c7c9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   427  c7d9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   428  c7e9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   429  c7f9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   430  c809 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   431  c819 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   432  c829 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   433  c839 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   434  c849 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   435  c859 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   436  c869 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   437  c879 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   438  c889 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   439  c899 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   440  c8a9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   441  c8b9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   442  c8c9 ffffffffffffffff...    !byte 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
   443                          
   444                          rom_maps: ; addresses of maps in ROM
   445  c8d9 0000                   !word 0 ; unshifted
   446  c8db 0000                   !word 0 ; shifted
   447  c8dd 0000                   !word 0 ; commodore
   448  c8df 0000                   !word 0 ; control
   449                          
   450                          mult_x18:
   451  c8e1 00122436485a           !byte 0, 18, 36, 54, 72, 90
   452                          
   453  c8e7 00                 row_y: !byte 0
   454  c8e8 00                 col_x: !byte 0
   455                          
   456                          xystrings:
   457                              ; !text 21,1,18,"SCANCODE",146,"   $",0
   458                              ; !text 22,2,18,"PETSCII",146,"    $",0
   459                              ; !text 26,4,"UNSHIFTED",0
   460                              ; !text 21,5,"UPPERCASE/GRAPHICS",0
   461                              ; !text 26,6,18,"C64.KEY",0
   462                              ; !text 26,11,"[FIND] F1/F2",0
   463                              ; !text 26,12,"[FG+-]",0
   464                              ; !text 26,13,"[BG+-]",0
   465                              ; !text 26,14,"[BORD]",0
   466                              ; !text 26,15,"[TEST]",0
   467                              ; !text 26,16,"[LOAD]",0
   468                              ; !text 26,17,"[SAVE]",0
   469                              ; !text 26,18,"[EXIT]",0
   470                              ; !text 23,22,18,"KEYMAP EDITOR",0
   471  c8e9 181612433634204b...    !text 24,22,18,"C64 KEYMAPS",0
   472  c8f8 1617284329323032...    !text 22,23,"(C)2025 DAVERVW",0
   473  c90a 1518474954485542...    !text 21,24,"GITHUB.COM/DAVERVW",0
   474  c91f 000000                 !text 0,0,0
